# 3D Point Cloud Geo-Correction
This is a repository that includes all the codes to geo_correct 3d point clouds generated by the gantry 3d laser scanner. Before running this repository one should merge east and west point clouds using [https://github.com/phytooracle/3d_icp_point_cloud_registration] repository and then properly rotate and register the merged ply file using [https://github.com/phytooracle/3d_geo_registration] repo. The docker file can be used to create a container image (or a singularity image) and use it to run (exec) the geo_correct_point_cloud.py script. This repository uses the detected locations of the plants from RGB sensor to geo-correct the point clouds. The output of this repository is the geo-corrected ply file. 

## Input Arguments

* Required Arguments:
    * The path to the registered and rotated point cloud file: path (-p --path)
    * Path to the detecto model pth file: model (-m --model)
    * The path to the full plant detection file: plants (-d --plants)
    * The date of scan, used for picking the closest RGB detection: scandate (-s --scandate)
    * The output directory: output (-o --output)
* Optional Arguments:
    * Number of cores to use: core (-c --core)

## Running the Script

* Docker:
    * Docker run \[-v /mount_this:/to_this\] image_name python3 geo_correct_point_cloud.py \[params\]
* Singularity:
    * Singularity exec \[-B /mount_this:/to_this\] image_name.simg python3 geo_correct_point_cloud.py \[params\]
